# 飞书机器人服务

项目初始化模板，用于设置新项目的基本配置，包括:
1. 设置项目路径
2. 加载环境变量
3. 读取配置文件

## 使用说明

1. 克隆仓库时需要带上 `--recurse-submodules` 参数以初始化子模块
2. 使用git mv命令修改 `NewProjectStart.ipynb` 文件的名称为项目名称并做初始化提交

## 项目重构规划

### 当前架构问题

1. **过度抽象**：项目中存在大量抽象层和间接跳转，使得代码流程难以追踪
2. **复杂的消息处理路径**：消息处理需要经过多个组件传递，增加了理解难度
3. **混合同步和异步**：同步和异步代码混合使用，导致错误处理困难
4. **组件边界模糊**：各组件之间的职责边界不够清晰

### 重构目标

1. **简化抽象层次**
   - 减少不必要的接口和抽象类
   - 直接使用具体实现而不是通过多层接口

2. **清晰的组件职责**
   - 重新设计组件边界，明确每个组件的职责范围
   - 避免职责重叠和循环依赖

3. **统一同步/异步处理方式**
   - 对于异步API，使用适配器封装为同步接口
   - 提取通用的异步-同步转换工具

4. **改进错误处理**
   - 增加全局异常处理机制
   - 提供更详细的日志和错误信息

### 重构步骤

1. **第一阶段：架构梳理**
   - 梳理现有组件依赖关系
   - 绘制新的架构图，明确组件边界

2. **第二阶段：接口整合**
   - 简化消息处理流程
   - 整合重复的工具函数

3. **第三阶段：同步/异步处理优化**
   - 实现统一的异步处理机制
   - 重构Notion服务等异步组件

## 未来功能规划

1. **Notion功能增强**
   - 解除已读标记功能
   - 支持更多标记操作（年度/季度/月度回顾等）
   - 批量标记功能

2. **用户体验优化**
   - 富文本消息增强
   - 操作撤销功能
   - 更多自定义卡片样式

3. **系统功能增强**
   - 定时任务管理界面
   - 用户权限管理
   - 运行状态监控
